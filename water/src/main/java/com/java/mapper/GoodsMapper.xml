<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.java.mapper.GoodsMapper">

<resultMap type="goods" id="GoodsAndCategory">
	<id property="g_id" column="g_id"/>
	<result property="g_name" column="g_name"/>
	<result property="g_price" column="g_price"/>
	<result property="g_imgUrl" column="g_imgUrl"/>
	<association property="category" javaType="category">
		<id property="c_id" column="c_id"/>
		<result property="c_name" column="c_name"/>
	</association>
</resultMap>
<select id="findAll" resultMap="GoodsAndCategory">
	select * from goods g,category c where g.c_id = c.c_id
</select>
<insert id="add" parameterType="goods">
	insert into goods values(g_id,#{g_name},#{g_price},#{category.c_id},#{g_imgUrl})
</insert>
<delete id="delete" parameterType="int">
	delete from goods where g_id in (
	<foreach collection="array" item="g_id" index="0" separator=",">
		#{g_id}
	</foreach>
	)
</delete>
<update id="edit" parameterType="goods">
	update goods set g_name=#{g_name},g_price=#{g_price},c_id=#{category.c_id},g_imgUrl=#{g_imgUrl} 
	where g_id=#{g_id}
</update>
<select id="findByName" parameterType="goods" resultType="goods">
	select * from goods,category where g_name = #{g_name}
	<if test="g_id">
		and g_id !=#{g_id}
	</if>
</select>
<select id="load" parameterType="int" resultMap="GoodsAndCategory">
	select * from goods g,category c where g_id = #{g_id} and g.c_id = c.c_id
</select>
</mapper>